(self["webpackChunktornado_test"]=self["webpackChunktornado_test"]||[]).push([[367],{9860:(e,t,n)=>{"use strict";n.d(t,{ZG:()=>Z,Zz:()=>N,iO:()=>$,LS:()=>j,wl:()=>q,nl:()=>O,G$:()=>z});var a=n(3914),s=n(8069),o=n(2312),i=n(3729),r=n(7453),u=n(7644),l=n(1942),p=n(9813),d=n(6603),c=n.n(d),y=n(1492),m=n.n(y),f=n(4244),b=n(2674),v=function(e,t,n,a){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(t){o(t)}}function r(e){try{u(a["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):s(e.value).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const w="https://json.extendsclass.com/bin",g={"api-key":"2a4e00f1-83f1-11ec-b95c-0242ac110002"},h=e=>e.ok?e.json():Promise.reject(e),M=e=>v(void 0,void 0,void 0,(function*(){const t=JSON.stringify(e);return fetch(w,{method:"POST",body:t,headers:g}).then((e=>h(e)))})),k=e=>v(void 0,void 0,void 0,(function*(){const t=`${w}/${e}`;return fetch(t,{method:"GET",headers:g}).then((e=>h(e)))}));var x=n(5527);const A=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"DECIMALS","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"INITIAL_SUPPLY","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"mint","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"value","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"value","type":"uint256"}],"name":"burnFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"account","type":"address"}],"name":"addMinter","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"renounceMinter","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"account","type":"address"}],"name":"isMinter","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":false,"stateMutability":"nonpayable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"account","type":"address"}],"name":"MinterAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"account","type":"address"}],"name":"MinterRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"}]');class C{constructor(e,t){const n=new x.CH(e,A,t);this.methods=n}}const _=JSON.parse('[{"constant":false,"inputs":[{"name":"_root","type":"bytes32"},{"name":"_tokenAddress","type":"address"},{"name":"_total","type":"uint256"},{"name":"_ipfs","type":"string"}],"name":"createNewAirdrop","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_ipfs","type":"string"}],"name":"cancelAirdrop","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"proof","type":"bytes32[]"},{"name":"root","type":"bytes32"},{"name":"leaf","type":"bytes32"}],"name":"verify","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"start","type":"uint256[]"},{"name":"length","type":"uint256[]"},{"name":"proofs","type":"bytes32[]"},{"name":"root","type":"bytes32"},{"name":"leafs","type":"bytes32[]"}],"name":"verifyProofs","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"proof","type":"bytes32[]"},{"name":"_recipient","type":"address"},{"name":"_amount","type":"uint256"},{"name":"_ipfs","type":"string"}],"name":"drop","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"airdrops","outputs":[{"name":"owner","type":"address"},{"name":"root","type":"bytes32"},{"name":"tokenAddress","type":"address"},{"name":"total","type":"uint256"},{"name":"claimed","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ipfs","type":"string"},{"indexed":true,"name":"rec","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Drop","type":"event"}]');class P{constructor(e,t){const n=new x.CH(e,_,t);this.methods=n}}var S=function(e,t,n,a){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(t){o(t)}}function r(e){try{u(a["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):s(e.value).then(i,r)}u((a=a.apply(e,t||[])).next())}))};window.Buffer=f.Buffer;const O=e=>e.replace(/\s+/g," ").trim().split(" ").map((e=>e.split(","))).sort(((e,t)=>+e[0]-+t[0])),T=e=>s.UJ(e),D=e=>e.every((([e,t])=>e&&t&&s.UJ(e)&&Number(t).toString()===t)),L=e=>c()(e,"0").length===e.length,z=e=>T(e.tokenAddress)?D(e.listTransactions)?!!L(e.listTransactions)||"Все адреса должны быть уникальны":"Адрес или количество токенов невалидно":"Адрес токена невалидный",q=(e,t,n)=>S(void 0,void 0,void 0,(function*(){const s=new C(n.tokenAddress,t),[i,r="",u=18,l="0",p="0"]=yield Promise.all([s.methods.name(),s.methods.symbol(),s.methods.decimals(),s.methods.allowance(e,"0x45df93713f04972e6419d31780a85b0fff56604c"),s.methods.balanceOf(e)]).catch((()=>[])),d=n.listTransactions.reduce(((e,[,t])=>e.add(o.vz(t,u))),a.O$.from(0)).toString(),c=o.bM(d,u).toString();return{name:i,symbol:r,address:s.methods.address,decimals:u,total:c,totalUnits:d,allowance:o.bM(l,u),balance:o.bM(p,u),isEnoughBalance:a.O$.from(p).gte(d),isNeedApprove:a.O$.from(l).lt(d)}})),Z=(e,t,n)=>S(void 0,void 0,void 0,(function*(){const a=new l.Q(t),s=new C(n.tokenAddress,a),i=a.getSigner(0),r=s.methods.connect(i),u=e?o.vz(e,yield s.methods.decimals()):p.Bz,d=yield r.approve("0x45df93713f04972e6419d31780a85b0fff56604c",u);return d})),H=([e,t],n)=>{const a=o.vz(t,n),s=i.$.encode(["address","uint256"],[e,a]);return s},U=(e,t)=>{const n=e.map((e=>H(e,t))),a=new b.MerkleTree(n,m(),{hashLeaves:!0,sortPairs:!0});return a},$=(e,t,n)=>S(void 0,void 0,void 0,(function*(){const a=U(e.listTransactions,t.decimals),s=yield M(e),o=new l.Q(n),i=new P("0x45df93713f04972e6419d31780a85b0fff56604c",o),r=o.getSigner(0),u=i.methods.connect(r),p=[a.getHexRoot(),t.address,t.totalUnits,s.id],d=yield u.createNewAirdrop(...p);return Object.assign(Object.assign({},s),{tx:d})})),j=(e,t)=>S(void 0,void 0,void 0,(function*(){const n=new P("0x45df93713f04972e6419d31780a85b0fff56604c",t),a=r.w(u.Y0(e)),[s,i]=yield Promise.all([k(e),n.methods.airdrops(a)]),l=new C(i.tokenAddress,t),[p,d,c]=yield Promise.all([l.methods.name(),l.methods.symbol(),l.methods.decimals()]);return{data:s,airdrops:{claimed:o.bM(i.claimed,c),owner:i.owner,tokenAddress:i.tokenAddress,total:o.bM(i.total,c),name:p,symbol:d,decimals:c}}})),N=(e,t,n,a,s,i)=>S(void 0,void 0,void 0,(function*(){const r=new l.Q(i),u=new P("0x45df93713f04972e6419d31780a85b0fff56604c",r),p=r.getSigner(0),d=u.methods.connect(p),c=U(s.listTransactions,a),y=m()(H([t,n],a)),f=c.getHexProof(y),b=c.verify(f,y,c.getRoot());console.assert(b,"proof is invalid ((");const v=[f,t,o.vz(n,a).toString(),e],w=yield d.drop(...v);return w}))},2156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var a=n(3673),s=n(2323);const o={key:0},i={key:2,class:"q-pa-lg"},r={key:3},u=(0,a.Uk)(" Вам полагается "),l=(0,a._)("br",null,null,-1),p=(0,a.Uk)("Token address: "),d=["href","textContent"],c=(0,a._)("br",null,null,-1),y=(0,a.Uk)(" У вас нет вознаграждений ");function m(e,t,n,m,f,b){const v=(0,a.up)("q-btn"),w=(0,a.up)("q-circular-progress"),g=(0,a.up)("q-banner"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{padding:"",class:"page-airdrop-summary"},{default:(0,a.w5)((()=>[e.isConnected?e.isLoading?((0,a.wg)(),(0,a.j4)(w,{key:1,indeterminate:"",size:"50px",color:"primary",class:"q-ma-md"})):e.errorMessage?((0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(g,{class:"bg-grey-3 text-red"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.errorMessage),1)])),_:1}),(0,a.Wm)(v,{to:"/",color:"primary",outline:"",class:"q-mt-md",label:"Назад"})])):e.claimData?((0,a.wg)(),(0,a.iD)("div",r,[u,(0,a._)("b",null,(0,s.zw)(e.claimData.amount)+" "+(0,s.zw)(e.airdrops.symbol),1),l,p,(0,a._)("a",{target:"_blank_",href:`https://goerli.etherscan.io/address/${e.airdrops.tokenAddress}`,textContent:(0,s.zw)(e.airdrops.tokenAddress)},null,8,d),c,(0,a.Wm)(v,{color:"primary",loading:e.isLoadingDrop,outline:"",class:"q-mt-md",label:"Забрать вознаграждения",onClick:e.onClaimedDrop},null,8,["loading","onClick"])])):((0,a.wg)(),(0,a.j4)(g,{key:4,class:"bg-grey-3 text-red"},{default:(0,a.w5)((()=>[y])),_:1})):((0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(v,{color:"primary",outline:"",class:"q-mt-md",label:"Подключить кошелек",onClick:e.onConnect},null,8,["onClick"])]))])),_:1})}var f=n(1959),b=n(8825),v=n(4778),w=n(9860),g=function(e,t,n,a){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(t){o(t)}}function r(e){try{u(a["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):s(e.value).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const h=(0,a.aZ)({name:"PageAirdropDrop",props:{id:{type:String,required:!0}},setup:e=>{const t=(0,f.iH)(!0),n=(0,f.iH)(!1),s=(0,f.iH)(""),o=(0,f.iH)(),i=(0,f.iH)({tokenAddress:"",listTransactions:[]}),r=(0,b.Z)(),{webProvider:u,ethAccount:l,externalProvider:p}=(0,v.O)().state,{isConnected:d}=(0,v.O)().getters,{connectToMetamask:c}=(0,v.O)().actions,y=(0,a.Fl)((()=>{var e;const t=null===(e=l.value)||void 0===e?void 0:e.toLowerCase();if(!t)return;const n=i.value.listTransactions.find((([e])=>{var t;return e.toLowerCase()===(null===(t=l.value)||void 0===t?void 0:t.toLowerCase())}));if(!n)return;const[a,s]=n;return{address:a,amount:s}})),m=()=>{c()},h=()=>g(void 0,void 0,void 0,(function*(){n.value=!0;const t=p.value,{address:a,amount:s}=y.value||{};if(a&&s&&t){try{const n=yield(0,w.Zz)(e.id,a,s,o.value.decimals,i.value,t);yield n.wait(),r.notify({color:"positive",message:"Вознаграждение получено",position:"top"})}catch(u){const{message:e}=(null===u||void 0===u?void 0:u.error)||u;r.notify({color:"negative",message:e,position:"top"})}n.value=!1}}));return(()=>{g(void 0,void 0,void 0,(function*(){if(u.value&&d.value){t.value=!0;try{const t=yield(0,w.LS)(e.id,u.value);i.value=t.data,o.value=t.airdrops}catch(n){s.value=`Рассылки с id="${e.id}" не существует`}t.value=!1}}))})(),{isConnected:d,isLoading:t,isLoadingDrop:n,errorMessage:s,data:i,airdrops:o,claimData:y,onConnect:m,onClaimedDrop:h}}});var M=n(4260),k=n(4379),x=n(4607),A=n(6122),C=n(5607),_=n(7518),P=n.n(_);const S=(0,M.Z)(h,[["render",m]]),O=S;P()(h,"components",{QPage:k.Z,QBtn:x.Z,QCircularProgress:A.Z,QBanner:C.Z})},3472:()=>{},2361:()=>{},4616:()=>{}}]);